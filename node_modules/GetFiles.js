module.exports = (function () {

    var readDir = require('readdir'),
        path = require('path');

    return {
        /* Gets the Path containing the folders from the config module */
        getVideoPath: function (video) {
            return path.join(path.normalize(CONFIG.folders.videoRoot), video);
        }
        ,
        /* Filter files in a Directory by extensions provided in the second args array */
        getFilesArray: function (pathname, extensions) {

            return readDir.readSync(pathname, extensions, readDir.ABSOLUTE_PATHS + readDir.CASELESS_SORT);

        }

    }


    /* Constructor */
//Get the Video Files, filter by the extensions from the CONFIG file.
    videos = getFilesArray(CONFIG.folders.videoRoot, CONFIG.extensions.videos);

    var model = Array();

    for (var v in videos) {
        model.push(
            {
                name: path.basename(videos[v], path.extname(videos[v])),
                filename: path.basename(videos[v]),
                folder: path.dirname(videos[v]),
                path: videos[v]
            });
    }


    return {
        videos: model,
        length: model.length
    };

})
();


